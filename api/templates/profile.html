{% extends "base.html" %}

{% block page_title %}My Profile{% endblock %}

{% block content %}
<!-- Account Information Card -->
<div class="card mb-4">
    <div class="card-header">
        <div class="card-title">
            <i class="fas fa-user"></i>
            <span>Account Information</span>
        </div>
    </div>
    <div class="card-body">
        <div class="alert alert-info">
            <div style="display: grid; gap: 8px;">
                <div><strong>Username:</strong> {{ user.username }}</div>
                <div><strong>Last Login:</strong> {{ user.last_login.strftime(request.session.date_format) if user.last_login else 'Never' }}</div>
                <div><strong>Account Created:</strong> {{ user.created_at.strftime(request.session.date_format) if user.created_at else '-' }}</div>
            </div>
        </div>
    </div>
</div>

<!-- Personal Information Card -->
<div class="card mb-4">
    <div class="card-header">
        <div class="card-title">
            <i class="fas fa-id-card"></i>
            <span>Personal Information</span>
        </div>
    </div>
    <div class="card-body">
        <form method="post" action="/profile/update_info">
            <div class="grid grid-cols-2 gap-3">
                <div class="form-group">
                    <label for="first_name" class="form-label">First Name</label>
                    <input id="first_name" class="form-control" name="first_name" value="{{ user.first_name or '' }}" placeholder="First name">
                </div>
                <div class="form-group">
                    <label for="last_name" class="form-label">Last Name</label>
                    <input id="last_name" class="form-control" name="last_name" value="{{ user.last_name or '' }}" placeholder="Last name">
                </div>
            </div>
            <div class="form-group mt-3">
                <label for="email" class="form-label">Email</label>
                <input id="email" class="form-control" name="email" type="email" value="{{ user.email or '' }}" placeholder="your.email@example.com">
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    <span>Update Information</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Change Password Card -->
<div class="card">
    <div class="card-header">
        <div class="card-title">
            <i class="fas fa-lock"></i>
            <span>Change Password</span>
        </div>
    </div>
    <div class="card-body">
        <form method="post" action="/profile/change_password">
            <div class="form-group">
                <label for="current_password" class="form-label">Current Password</label>
                <input id="current_password" class="form-control" name="current_password" type="password" placeholder="Enter your current password" required>
            </div>
            <div class="form-group mt-3">
                <label for="new_password" class="form-label">New Password</label>
                <input id="new_password" class="form-control" name="new_password" type="password" placeholder="Enter your new password" required>
            </div>
            <div class="form-group mt-3">
                <label for="confirm_password" class="form-label">Confirm New Password</label>
                <input id="confirm_password" class="form-control" name="confirm_password" type="password" placeholder="Confirm your new password" required>
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-key"></i>
                    <span>Change Password</span>
                </button>
            </div>
        </form>
    </div>
</div>

{% endblock %}