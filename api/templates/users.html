{% extends "base.html" %}
{% block content %}

<h2>User Management</h2>

<!-- Create New User Section -->
<div class="settings-section">
    <h3>Create New User</h3>
    <p class="section-description">Add a new user account to the system</p>
    
    <form method="post" action="/users/create">
        <div class="form-group">
            <label for="username">Username</label>
            <input id="username" class="form-control" name="username" required>
        </div>
        <div class="form-group">
            <label for="password">Password</label>
            <input id="password" class="form-control" name="password" type="password" required>
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary"><i class="fa-solid fa-user-plus"></i> Create User</button>
        </div>
    </form>
</div>

<!-- Existing Users Section -->
<div class="settings-section">
    <h3>Existing Users</h3>
    <p class="section-description">View and manage all user accounts</p>
    
    <table>
        <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Status</th>
            <th>Created At</th>
            <th>Actions</th>
        </tr>

        {% for user in users %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.username }}</td>
            <td>
                {% if user.enabled %}
                    <span class="badge bg-success">Enabled</span>
                {% else %}
                    <span class="badge bg-danger">Disabled</span>
                {% endif %}
            </td>
            <td>{{ user.created_at.strftime(request.session.date_format) }}</td>
            <td>
                <form method="post" action="/users/{{ user.id }}/toggle" style="display: inline;">
                    <button type="submit" class="btn btn-sm {% if user.enabled %}btn-warning{% else %}btn-success{% endif %}">
                        <i class="fa-solid {% if user.enabled %}fa-ban{% else %}fa-check{% endif %}"></i> 
                        {{ "Disable" if user.enabled else "Enable" }}
                    </button>
                </form>
                <form method="post" action="/users/{{ user.id }}/delete" style="display: inline;">
                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this user?')"><i class="fa-solid fa-trash"></i> Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}