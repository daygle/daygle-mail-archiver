{% extends "base.html" %}

{% block content %}
<h1>{{ message.subject or "(no subject)" }}</h1>

<div class="message-meta">
  <table class="meta-table">
    <tr>
      <td><strong>From:</strong></td>
      <td>{{ message.sender }}</td>
    </tr>
    <tr>
      <td><strong>To:</strong></td>
      <td>{{ message.recipients }}</td>
    </tr>
    <tr>
      <td><strong>Date:</strong></td>
      <td>{{ message.date }}</td>
    </tr>
    <tr>
      <td><strong>Account:</strong></td>
      <td>{{ message.source }}</td>
    </tr>
    <tr>
      <td><strong>Folder:</strong></td>
      <td>{{ message.folder }}</td>
    </tr>
  </table>
</div>

<div class="message-actions">
  <a href="/messages/{{ message.id }}/download" class="btn btn-secondary">Download EML</a>

  <form method="post" action="/messages/{{ message.id }}/delete/confirm" style="display:inline;">
    <button type="submit" class="btn btn-danger">Delete</button>
  </form>
</div>

<hr>

<h2>Headers</h2>
<pre class="message-headers">
{% for k, v in headers.items() %}
{{ k }}: {{ v }}
{% endfor %}
</pre>

<h2>Subject</h2>
<pre class="message-subject">
{{ message.subject or "(no subject)" }}
</pre>

<h2>Body</h2>
<div class="message-body">
  {% if body.html %}
    {{ body.html | safe }}
  {% else %}
    <pre>{{ body.text }}</pre>
  {% endif %}
</div>
{% endblock %}
