{% extends "base.html" %}
{% block content %}

<h2>Log Viewer</h2>

<!-- Log Viewer Section -->
<div class="settings-section">
    <h3>System Logs</h3>
    <p class="section-description">View system logs and error messages</p>

    <div class="log-filter-container">
        <label for="log_level">Filter by Level:</label>
        <form method="get" class="log-filter-form">
            <select id="log_level" class="form-control" name="level" onchange="this.form.submit()">
                <option value="all" {% if current_level == 'all' %}selected{% endif %}>All</option>
                <option value="error" {% if current_level == 'error' %}selected{% endif %}>Error</option>
                <option value="warning" {% if current_level == 'warning' %}selected{% endif %}>Warning</option>
                <option value="info" {% if current_level == 'info' %}selected{% endif %}>Info</option>
            </select>
        </form>
    </div>

    <table>
        <tr>
            <th>Time</th>
            <th>Level</th>
            <th>Source</th>
            <th>Message</th>
        </tr>

        {% for e in errors %}
        <tr>
            <td>{{ e.timestamp.strftime(request.session.date_format) }}</td>
            <td>{{ e.level }}</td>
            <td>{{ e.source }}</td>
            <td>{{ e.message }}</td>
        </tr>
        {% endfor %}
    </table>
</div>

{% endblock %}
